<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Rabin IDS Tests</title>
  <link rel="stylesheet" href="https://code.jquery.com/qunit/qunit-2.0.1.css">
</head>

<body>
  <div id="qunit"></div>
  <div id="qunit-fixture"></div>
  <script src="https://code.jquery.com/qunit/qunit-2.0.1.js"></script>
  <script src="../src/table.js"></script>
  <script src="../src/gf256.js"></script>
  <script src="../src/matrix.js"></script>
  <script src="../src/fake_rng.js"></script>
  <script src="../src/rabin_ids.js"></script>
  <script>
    QUnit.test("roundtrip1", function(assert) {
      'use strict';
      var test = new rabin_ids.Configuration(10, 6, fake_rng.get_values);
      var testtext = [2,3,56,32,57,124,45,34,98,61,1,9,123,233,210];
      var res = test.encode(testtext);
      assert.deepEqual(test.decode(res), testtext);
      assert.deepEqual(test.decode([res[5],res[3],res[8],res[0],res[2],res[6]]), testtext);
    });
    QUnit.test("roundtrip2", function(assert) {
      'use strict';
      var test = new rabin_ids.Configuration(10, 6, fake_rng.get_values);
      var testtext = [2,3,56,32,57,124,45,34,98,61,1,9,123,233,210,198];
      var res = test.encode(testtext);
      assert.deepEqual(test.decode(res), testtext);
      assert.deepEqual(test.decode([res[5],res[3],res[8],res[0],res[2],res[6]]), testtext);
    });
  </script>
</body>
</html>
